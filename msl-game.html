<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MSL Study & Games ‚Äì SMCM MSL</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" type="image/png" href="logo-1.png" />

  <!-- Page-specific layout + game styles -->
  <style>
    .game-layout {
      display: flex;
      gap: 2rem;
      align-items: flex-start;
      margin-top: 1rem;
    }

    .game-column-study {
      flex: 3; /* ~60% */
      min-width: 0;
    }

    .game-column-play {
      flex: 2; /* ~40% */
      min-width: 0;
    }

    .game-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.25rem;
    }

    .game-box {
      margin-top: 0.5rem;
    }

    .game-canvas {
      width: 100%;
      max-width: 360px;
      height: 260px;
      border-radius: 12px;
      border: 1px solid rgba(0, 0, 0, 0.1);
      background: #0b1520;
      display: block;
      margin: 0 auto;
    }

    .game-status {
      font-size: 0.85rem;
      margin-top: 0.5rem;
      opacity: 0.9;
    }

    .hangman-word,
    .hangman-letters,
    .hangman-status {
      font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      margin-top: 0.4rem;
    }

    .hangman-word {
      font-size: 1.1rem;
      letter-spacing: 0.2rem;
      font-weight: 600;
    }

    .hangman-letters span {
      display: inline-block;
      margin-right: 0.25rem;
      margin-bottom: 0.25rem;
      padding: 0.1rem 0.35rem;
      border-radius: 999px;
      border: 1px solid rgba(0, 0, 0, 0.1);
      font-size: 0.75rem;
    }

    .hangman-input-row {
      display: flex;
      gap: 0.5rem;
      margin-top: 0.5rem;
      align-items: center;
    }

    .hangman-input-row input {
      max-width: 80px;
    }

    /* Field companion */
    .companion-settings {
      margin-top: 1.25rem;
    }

    .companion-settings label {
      font-size: 0.9rem;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      margin-right: 0.75rem;
    }

    .field-companion-dot {
      position: fixed;
      bottom: 1.5rem;
      right: 1.5rem;
      width: 56px;
      height: 56px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #ffffff, #ffd15c);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.35);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.9rem;
      cursor: pointer;
      z-index: 40;
      user-select: none;
      transition: transform 0.15s ease-out, box-shadow 0.15s ease-out;
    }

    .field-companion-dot.paused {
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.4);
      opacity: 0.9;
    }

    .field-companion-dot:hover {
      transform: scale(1.06);
    }

    .field-companion-dot:active {
      transform: scale(0.97);
    }

    .field-companion-hint {
      font-size: 0.75rem;
      opacity: 0.8;
      margin-top: 0.4rem;
    }

    @media (max-width: 900px) {
      .game-layout {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="inner">
      <a href="index.html#hero" class="brand">
        <span class="brand-mark brand-mark-logo">
          <img src="logo-1.png" alt="SMCM MSL logo" />
        </span>
        <span class="brand-text">
          <span class="brand-title">Maryland Student Legislature</span>
          <span class="brand-sub">St. Mary‚Äôs College of Maryland Chapter</span>
        </span>
      </a>
      <button class="nav-toggle" id="navToggle" aria-label="Toggle navigation">‚ò∞</button>
      <nav class="nav" id="mainNav">
        <a href="index.html#hero">Home</a>
        <a href="index.html#maryland">About MSL</a>
        <a href="index.html#chapter">Our Chapter</a>
        <a href="executive-board.html">Exec Board</a>
        <a href="index.html#journey">Your Journey</a>
        <a href="index.html#documents">Documents</a>
        <a href="resources.html">Resources</a>
        <a href="bulletin.html">Bulletin</a>
        <a href="msl-game.html">Games</a>
        <a href="index.html#gallery">Gallery</a>
        <a href="index.html#contact">Join Us</a>
        <a href="msl-giving.html">GIVING TUESDAY CHAMPIONSHIP</a>
      </nav>
    </div>
  </header>

  <main>
    <section class="section">
      <div class="inner">
        <div class="section-header center">
          <p class="eyebrow">Practice & Play</p>
          <h1>MSL Study Zone & Mini-Games</h1>
          <p class="section-body">
            Use the left side to study, quiz yourself, and draft ideas. Use the right side to take a quick
            break with mini-games that still keep you in the MSL mindset. Your field companion hangs out
            with you while you work.
          </p>
        </div>

        <div class="game-layout">
          <!-- 60% COLUMN ‚Äì STUDY -->
          <div class="game-column-study">
            <article class="card plain-card">
              <h2>Quick Quiz: MSL & Parliamentary Basics</h2>
              <p class="small">
                Test yourself on a few fundamentals you‚Äôll use in session. Controls: click your answers,
                then hit ‚ÄúCheck Answers‚Äù.
              </p>

              <div class="game-box" id="quizBox">
                <form id="mslQuiz">
                  <div class="small" style="margin-bottom: 0.75rem;">
                    <strong>1.</strong> In most chambers, what does it mean to ‚Äúmove the previous question‚Äù?
                    <br />
                    <label><input type="radio" name="q1" value="a" /> Start debate on a new bill</label><br />
                    <label><input type="radio" name="q1" value="b" /> End debate and vote now</label><br />
                    <label><input type="radio" name="q1" value="c" /> Send the bill back to committee</label>
                  </div>

                  <div class="small" style="margin-bottom: 0.75rem;">
                    <strong>2.</strong> In MSL, a ‚Äúquorum‚Äù most directly refers to:
                    <br />
                    <label><input type="radio" name="q2" value="a" /> The number of bills on the docket</label><br />
                    <label><input type="radio" name="q2" value="b" /> The minimum members needed to do business</label><br />
                    <label><input type="radio" name="q2" value="c" /> The number of officers on the Exec Board</label>
                  </div>

                  <div class="small" style="margin-bottom: 0.75rem;">
                    <strong>3.</strong> Which is the <em>best</em> sponsor speech opener?
                    <br />
                    <label><input type="radio" name="q3" value="a" /> ‚ÄúThis bill is pretty self-explanatory, so‚Ä¶‚Äù</label><br />
                    <label><input type="radio" name="q3" value="b" /> ‚ÄúMembers, this bill addresses a specific Maryland problem‚Ä¶‚Äù</label><br />
                    <label><input type="radio" name="q3" value="c" /> ‚ÄúI wrote this at 2 AM, so bear with me.‚Äù</label>
                  </div>

                  <button type="button" class="btn btn-primary small" id="checkQuiz">
                    Check Answers
                  </button>
                </form>
                <p class="game-status" id="quizResult"></p>
              </div>
            </article>

            <article class="card plain-card" style="margin-top: 1.25rem;">
              <h2>Bill Idea Scratchpad</h2>
              <p class="small">
                Use this space to sketch a bill idea you might want to bring to committee. Think: problem,
                who it affects in Maryland, and what your bill would actually do.
              </p>
              <div class="game-box">
                <label class="small" for="billIdea">
                  Jot down a rough sponsor pitch or bullet points:
                </label>
                <textarea
                  id="billIdea"
                  rows="7"
                  placeholder="Example: A bill to expand broadband access in rural Maryland by..."
                  style="width: 100%; margin-top: 0.35rem;"
                ></textarea>
                <p class="small" style="margin-top: 0.4rem; opacity: 0.8;">
                  Tip: If you like what you write here, copy it into a doc and use the
                  <strong>Legislative Drafting Manual</strong> from the Resources page to turn it into
                  a full bill.
                </p>
              </div>

              <div class="card plain-card companion-settings">
                <h3>Field Companion</h3>
                <p class="small">
                  Choose a companion to float around your screen while you study and play. Click your
                  companion to pause or resume their little orbit.
                </p>
                <div class="small" style="margin-top: 0.4rem;">
                  <label>
                    <input type="radio" name="companion" value="dog" checked />
                    üê∂ Dog
                  </label>
                  <label>
                    <input type="radio" name="companion" value="cat" />
                    üê± Cat
                  </label>
                  <label>
                    <input type="radio" name="companion" value="koala" />
                    üê® Koala
                  </label>
                </div>
                <p class="field-companion-hint">
                  Your companion dot in the corner matches your choice above. Click it if you need some
                  stillness while you focus.
                </p>
              </div>
            </article>
          </div>

          <!-- 40% COLUMN ‚Äì GAMES -->
          <div class="game-column-play">
            <div class="game-grid">
              <!-- Snake -->
              <article class="card plain-card">
                <h2>Snake: Session Snack Run</h2>
                <p class="small">
                  Collect ‚Äúsnacks‚Äù to grow your snake without crashing into yourself. Controls:
                  <strong>WASD</strong> keys only.
                </p>
                <div class="game-box">
                  <canvas id="snakeCanvas" class="game-canvas"></canvas>
                  <p class="game-status" id="snakeStatus">
                    Use W, A, S, D to move. Don‚Äôt hit the walls or yourself.
                  </p>
                </div>
              </article>

              <!-- Runner -->
              <article class="card plain-card">
                <h2>Floor Runner</h2>
                <p class="small">
                  Dodge triangular ‚Äúprocedural hurdles‚Äù on the floor. Grab boost flowers for a speed
                  burst. Controls: <strong>Space</strong> or <strong>W</strong> to jump.
                </p>
                <div class="game-box">
                  <canvas id="runnerCanvas" class="game-canvas"></canvas>
                  <p class="game-status" id="runnerStatus">
                    Stay on the platform and avoid the spikes. One jump at a time.
                  </p>
                </div>
              </article>

              <!-- Hangman -->
              <article class="card plain-card">
                <h2>Hangman: MSL Lingo</h2>
                <p class="small">
                  Guess the MSL-related term before you run out of attempts. You‚Äôll see terms used
                  across our site and docs.
                </p>
                <div class="game-box">
                  <div class="hangman-word" id="hmWord">_ _ _ _ _</div>
                  <div class="hangman-letters small" id="hmGuesses"></div>
                  <div class="hangman-status small" id="hmStatus"></div>
                  <div class="hangman-input-row">
                    <input
                      type="text"
                      id="hmInput"
                      maxlength="1"
                      placeholder="Letter"
                    />
                    <button type="button" class="btn btn-primary small" id="hmGuessBtn">
                      Guess
                    </button>
                    <button type="button" class="btn btn-ghost small" id="hmNewWord">
                      New Word
                    </button>
                  </div>
                </div>
              </article>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="inner footer-inner">
      <p>¬© <span id="year"></span> Maryland Student Legislature ‚Äì St. Mary‚Äôs College of Maryland Chapter.</p>
      <p class="small">
        Student-led, nonpartisan, and rooted in Maryland‚Äôs civic life. This site is maintained by the SMCM
        Maryland Student Legislature Chapter and is not an official publication of St. Mary‚Äôs College of
        Maryland or the State of Maryland.
      </p>
    </div>
  </footer>

  <script src="script.js"></script>

  <!-- Page-specific game logic -->
  <script>
    // Prevent game keys from firing while typing in inputs/textareas
    function isTypingTarget(e) {
      const tag = (e.target.tagName || "").toLowerCase();
      return tag === "input" || tag === "textarea";
    }

    // -------------------------
    // QUIZ LOGIC
    // -------------------------
    (function () {
      const btn = document.getElementById("checkQuiz");
      const result = document.getElementById("quizResult");
      if (!btn || !result) return;

      btn.addEventListener("click", function () {
        const form = document.getElementById("mslQuiz");
        if (!form) return;
        const answers = { q1: "b", q2: "b", q3: "b" };
        let score = 0;
        let total = 3;

        Object.keys(answers).forEach((q) => {
          const checked = form.querySelector(`input[name="${q}"]:checked`);
          if (checked && checked.value === answers[q]) score++;
        });

        if (score === total) {
          result.textContent =
            "3/3 ‚Äì nice. You officially unlocked the ‚Äòactually-knows-what‚Äôs-going-on-in-session‚Äô badge.";
        } else if (score === 2) {
          result.textContent =
            "2/3 ‚Äì close. Re-skim the Resources page and you‚Äôll be unstoppable.";
        } else {
          result.textContent =
            score +
            "/3 ‚Äì that‚Äôs why this page exists. Missed questions are just future strengths.";
        }
      });
    })();

    // -------------------------
    // SNAKE GAME (WASD ONLY)
    // -------------------------
    (function () {
      const canvas = document.getElementById("snakeCanvas");
      const statusEl = document.getElementById("snakeStatus");
      if (!canvas || !canvas.getContext) return;
      const ctx = canvas.getContext("2d");

      const cols = 20;
      const rows = 20;
      const cellSize = Math.floor(canvas.width / cols) || 15;

      let snake, dir, food, alive, tickInterval;

      function resetSnake() {
        snake = [{ x: 10, y: 10 }];
        dir = { x: 1, y: 0 };
        food = { x: 5, y: 5 };
        alive = true;
        if (statusEl) {
          statusEl.textContent = "Use W, A, S, D to move. Don‚Äôt hit the walls or yourself.";
        }
      }

      function spawnFood() {
        food = {
          x: Math.floor(Math.random() * cols),
          y: Math.floor(Math.random() * rows),
        };
      }

      function drawSnake() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        // background
        ctx.fillStyle = "#0b1520";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // food
        ctx.fillStyle = "#facc15";
        ctx.fillRect(
          food.x * cellSize + 2,
          food.y * cellSize + 2,
          cellSize - 4,
          cellSize - 4
        );

        // snake
        snake.forEach((seg, index) => {
          ctx.fillStyle = index === 0 ? "#22c55e" : "#16a34a";
          ctx.fillRect(
            seg.x * cellSize + 1,
            seg.y * cellSize + 1,
            cellSize - 2,
            cellSize - 2
          );
        });
      }

      function tick() {
        if (!alive) return;
        const head = snake[0];
        const newHead = { x: head.x + dir.x, y: head.y + dir.y };

        // wall collision
        if (
          newHead.x < 0 ||
          newHead.x >= cols ||
          newHead.y < 0 ||
          newHead.y >= rows
        ) {
          alive = false;
        }

        // self collision
        if (
          alive &&
          snake.some((seg) => seg.x === newHead.x && seg.y === newHead.y)
        ) {
          alive = false;
        }

        if (!alive) {
          if (statusEl) statusEl.textContent = "Game over ‚Äì press R to restart.";
          return;
        }

        snake.unshift(newHead);

        // food
        if (newHead.x === food.x && newHead.y === food.y) {
          spawnFood();
        } else {
          snake.pop();
        }

        drawSnake();
      }

      resetSnake();
      drawSnake();
      tickInterval = setInterval(tick, 150);

      document.addEventListener("keydown", (e) => {
        if (isTypingTarget(e)) return;
        const key = e.key.toLowerCase();
        if (!alive && key === "r") {
          resetSnake();
          drawSnake();
          return;
        }
        if (key === "w" && dir.y !== 1) dir = { x: 0, y: -1 };
        else if (key === "s" && dir.y !== -1) dir = { x: 0, y: 1 };
        else if (key === "a" && dir.x !== 1) dir = { x: -1, y: 0 };
        else if (key === "d" && dir.x !== -1) dir = { x: 1, y: 0 };
      });
    })();

    // -------------------------
    // RUNNER GAME
    // -------------------------
    (function () {
      const canvas = document.getElementById("runnerCanvas");
      const statusEl = document.getElementById("runnerStatus");
      if (!canvas || !canvas.getContext) return;
      const ctx = canvas.getContext("2d");

      const width = canvas.width;
      const height = canvas.height;
      const groundY = height - 40;

      let player = {
        x: 40,
        y: groundY - 24,
        w: 24,
        h: 24,
        vy: 0,
        jumping: false,
        speedBoost: 0,
        boostTime: 0,
      };

      let obstacles = [];
      let flowers = [];
      let speed = 4;
      let running = true;

      function spawnObstacle() {
        obstacles.push({
          x: width + Math.random() * 100,
          y: groundY - 20,
          w: 26,
          h: 20,
        });
      }

      function spawnFlower() {
        flowers.push({
          x: width + 150 + Math.random() * 200,
          y: groundY - 40,
          r: 10,
        });
      }

      function resetRunner() {
        player.y = groundY - 24;
        player.vy = 0;
        player.jumping = false;
        player.speedBoost = 0;
        player.boostTime = 0;
        obstacles = [];
        flowers = [];
        speed = 4;
        running = true;
        if (statusEl) {
          statusEl.textContent =
            "Stay on the platform and avoid the spikes. Press Space or W to jump. R to restart.";
        }
        spawnObstacle();
        spawnFlower();
      }

      resetRunner();

      function updateRunner() {
        if (!running) return;

        // gravity
        player.vy += 0.7;
        player.y += player.vy;

        // ground
        if (player.y + player.h >= groundY) {
          player.y = groundY - player.h;
          player.vy = 0;
          player.jumping = false;
        }

        // boosts
        if (player.boostTime > 0) {
          player.boostTime -= 1;
          if (player.boostTime <= 0) {
            player.speedBoost = 0;
          }
        }

        const currentSpeed = speed + player.speedBoost;

        // move obstacles
        obstacles.forEach((ob) => {
          ob.x -= currentSpeed;
        });
        obstacles = obstacles.filter((ob) => ob.x + ob.w > -10);
        if (obstacles.length < 3 && Math.random() < 0.03) {
          spawnObstacle();
        }

        // move flowers
        flowers.forEach((f) => {
          f.x -= currentSpeed * 0.9;
        });
        flowers = flowers.filter((f) => f.x + f.r > -10);
        if (flowers.length < 2 && Math.random() < 0.01) {
          spawnFlower();
        }

        // collisions - obstacles
        obstacles.forEach((ob) => {
          const collide =
            player.x < ob.x + ob.w &&
            player.x + player.w > ob.x &&
            player.y < ob.y + ob.h &&
            player.y + player.h > ob.y;
          if (collide) {
            running = false;
            if (statusEl) {
              statusEl.textContent =
                "Ouch. You hit a hurdle. Press R to try again.";
            }
          }
        });

        // collisions - flowers
        flowers.forEach((f) => {
          const dx = player.x + player.w / 2 - f.x;
          const dy = player.y + player.h / 2 - f.y;
          const dist = Math.sqrt(dx * dx + dy * dy);
          if (dist < f.r + 16) {
            // collect boost
            player.speedBoost = 2;
            player.boostTime = 300; // ~5 seconds at 60fps
            f.collected = true;
          }
        });
        flowers = flowers.filter((f) => !f.collected);
      }

      function drawRunner() {
        ctx.clearRect(0, 0, width, height);

        // background
        ctx.fillStyle = "#020617";
        ctx.fillRect(0, 0, width, height);

        // ground
        ctx.fillStyle = "#1e293b";
        ctx.fillRect(0, groundY, width, height - groundY);

        // player
        ctx.fillStyle = "#38bdf8";
        ctx.fillRect(player.x, player.y, player.w, player.h);

        // obstacles ‚Äì triangles
        ctx.fillStyle = "#f97316";
        obstacles.forEach((ob) => {
          ctx.beginPath();
          ctx.moveTo(ob.x, ob.y + ob.h);
          ctx.lineTo(ob.x + ob.w / 2, ob.y);
          ctx.lineTo(ob.x + ob.w, ob.y + ob.h);
          ctx.closePath();
          ctx.fill();
        });

        // flowers ‚Äì little circles
        ctx.fillStyle = "#22c55e";
        flowers.forEach((f) => {
          ctx.beginPath();
          ctx.arc(f.x, f.y, f.r, 0, Math.PI * 2);
          ctx.fill();
        });
      }

      function loop() {
        updateRunner();
        drawRunner();
        requestAnimationFrame(loop);
      }
      loop();

      document.addEventListener("keydown", (e) => {
        if (isTypingTarget(e)) return;
        const key = e.key.toLowerCase();
        if ((key === " " || key === "w") && !player.jumping && running) {
          player.vy = -12;
          player.jumping = true;
        } else if (key === "r") {
          resetRunner();
        }
      });
    })();

    // -------------------------
    // HANGMAN GAME
    // -------------------------
    (function () {
      const words = [
        "quorum",
        "amendment",
        "caucus",
        "gavel",
        "resolution",
        "committee",
        "docket",
        "sponsor",
        "motion",
        "chamber",
      ];

      const wordEl = document.getElementById("hmWord");
      const guessesEl = document.getElementById("hmGuesses");
      const statusEl = document.getElementById("hmStatus");
      const inputEl = document.getElementById("hmInput");
      const guessBtn = document.getElementById("hmGuessBtn");
      const newBtn = document.getElementById("hmNewWord");

      if (!wordEl || !guessesEl || !statusEl || !inputEl || !guessBtn || !newBtn) return;

      let currentWord = "";
      let revealed = [];
      let guesses = [];
      let wrong = 0;
      const maxWrong = 6;

      function pickWord() {
        currentWord = words[Math.floor(Math.random() * words.length)];
        revealed = currentWord.split("").map((ch) => (ch === "-" ? "-" : "_"));
        guesses = [];
        wrong = 0;
        render();
        statusEl.textContent = "Guess a letter related to our MSL universe.";
      }

      function render() {
        wordEl.textContent = revealed.join(" ");
        guessesEl.innerHTML = "";
        guesses.forEach((g) => {
          const span = document.createElement("span");
          span.textContent = g;
          guessesEl.appendChild(span);
        });
      }

      function checkWinLose() {
        if (!revealed.includes("_")) {
          statusEl.textContent =
            "You got it! Secret reward: you now officially know at least one piece of MSL jargon on purpose.";
          return true;
        }
        if (wrong >= maxWrong) {
          statusEl.textContent =
            "Out of attempts. The word was \"" + currentWord + "\". Hit ‚ÄòNew Word‚Äô to try again.";
          return true;
        }
        return false;
      }

      function handleGuess() {
        const raw = inputEl.value.toLowerCase().trim();
        inputEl.value = "";
        if (!raw || raw.length !== 1 || !/[a-z]/.test(raw)) {
          statusEl.textContent = "Enter a single letter (A‚ÄìZ).";
          return;
        }
        if (guesses.includes(raw)) {
          statusEl.textContent = "You already tried that letter.";
          return;
        }
        guesses.push(raw);

        if (currentWord.includes(raw)) {
          currentWord.split("").forEach((ch, i) => {
            if (ch === raw) revealed[i] = ch;
          });
          statusEl.textContent = "Nice. That letter is in the word.";
        } else {
          wrong++;
          statusEl.textContent =
            "Nope. " + (maxWrong - wrong) + " attempts left.";
        }
        render();
        checkWinLose();
      }

      guessBtn.addEventListener("click", handleGuess);
      inputEl.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
          e.preventDefault();
          handleGuess();
        }
      });
      newBtn.addEventListener("click", pickWord);

      pickWord();
    })();

    // -------------------------
    // FIELD COMPANION FLOATING DOT
    // -------------------------
    (function () {
      const companionEl = document.createElement("div");
      companionEl.id = "fieldCompanion";
      companionEl.className = "field-companion-dot paused";
      companionEl.textContent = "üê∂";
      document.body.appendChild(companionEl);

      const radios = document.querySelectorAll('input[name="companion"]');
      const emojiMap = {
        dog: "üê∂",
        cat: "üê±",
        koala: "üê®",
      };

      let x = window.innerWidth * 0.7;
      let y = window.innerHeight * 0.6;
      let vx = 1.2;
      let vy = 0.9;
      const size = 56;
      let moving = true;

      function updateEmoji() {
        const checked = Array.from(radios).find((r) => r.checked);
        const emoji = emojiMap[checked ? checked.value : "dog"] || "üê∂";
        companionEl.textContent = emoji;
      }

      radios.forEach((r) => {
        r.addEventListener("change", updateEmoji);
      });
      updateEmoji();

      companionEl.addEventListener("click", () => {
        moving = !moving;
        companionEl.classList.toggle("paused", !moving);
      });

      function moveCompanion() {
        if (moving) {
          x += vx;
          y += vy;

          const maxX = window.innerWidth - size - 10;
          const maxY = window.innerHeight - size - 10;
          const minX = 10;
          const minY = 10;

          if (x < minX || x > maxX) {
            vx *= -1;
            x = Math.min(Math.max(x, minX), maxX);
          }
          if (y < minY || y > maxY) {
            vy *= -1;
            y = Math.min(Math.max(y, minY), maxY);
          }

          companionEl.style.transform = `translate3d(${x}px, ${y}px, 0)`;
        }
        requestAnimationFrame(moveCompanion);
      }
      moveCompanion();

      window.addEventListener("resize", () => {
        x = Math.min(x, window.innerWidth - size - 10);
        y = Math.min(y, window.innerHeight - size - 10);
      });
    })();
  </script>
</body>
</html>
